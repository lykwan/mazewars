{"version":3,"sources":["webpack:///webpack/bootstrap fef7cd27bf44e4b9fc93","webpack:///./public/src/index.js","webpack:///./public/src/game.js","webpack:///./public/src/components/init.js","webpack:///./public/src/components/components.js","webpack:///./public/src/constants.js","webpack:///./public/src/components/player.js","webpack:///./public/src/components/weapon.js","webpack:///./public/src/components/ball.js","webpack:///./public/src/model/client_model.js","webpack:///./public/src/board.js","webpack:///./public/src/cell.js"],"names":["document","addEventListener","game","run","Constants","require","mapGrid","gameSettings","socket","io","Game","players","weapons","playersInfo","board","tileBoard","createTileBoard","selfId","ball","translateX","translateY","pageURL","decodeURIComponent","window","location","search","substring","param","split","roomId","setUpJoinRoom","undefined","emit","on","$","append","data","msg","loadNewRoomButton","isNewRoom","history","replaceState","remove","start","makeNewRoomButton","e","preventDefault","Array","NUM_MAZE_ROWS","i","NUM_MAZE_COLS","Crafty","background","iso","diamondIso","init","TILE","WIDTH","SURFACE_HEIGHT","scene","setUpLoadingScene","bind","startGame","keyCode","keys","S","unbind","setUpNewGame","setUpPlayersMovement","setUpPlacingWeapons","setUpCreateDamage","setUpHPChange","setUpTimer","setUpGameOver","setUpAddBall","setUpShowBall","setUpShowBallRecord","setUpHaveWeapon","attr","x","y","w","text","textColor","winnerText","winnerId","winnerScore","loadingScene","assetsObj","ORIG_WIDTH","ORIG_HEIGHT","PLAYER","BALL","BFS","load","playerTextY","playerText","playerColor","NUM_COLS","NUM_ROWS","seedRandomStr","playerId","destroy","timer","forEach","playerInfo","playerPx","playerX","playerY","playerPos","playerRow","playerCol","parseInt","player","setUp","setUpSocket","setUpSetBallTime","bindingKeyEvents","h","HEIGHT","reel","place","Z","console","log","HP","longestBallHoldingTime","otherPlayer","createMapEntities","j","maze","isWall","wallEntity","tileEntity","viewport","GAME_WIDTH","playerOldX","playerOldY","charMove","left","isPlaying","animate","unflip","down","up","flip","right","RIGHT_ARROW","pauseAnimation","LEFT_ARROW","UP_ARROW","DOWN_ARROW","weapon","setUpStaticPos","row","col","type","addComponent","activeComponent","removeComponent","damageDisappearAfter","playerHP","pickUpBall","color","html","currentBallHoldingTime","score","weaponType","loseWeapon","empty","createComponents","createPlayerComponent","createWeaponComponent","createBallComponent","module","exports","GAME_HEIGHT","wallDirection","epsilon","c","at","getRowsCols","xOverW","yOverH","fixRoundingErrors","rows","Math","floor","spaceOccupyingX","push","ceil","cols","spaceOccupyingY","n","abs","round","requires","staticRow","staticCol","activeTileSprite","setTimeout","DAMAGE_DISAPPEAR_TIME","RATIO","actor","y0","y1","DFS_WIDTH","DFS_HEIGHT","BFS_WIDTH","BFS_HEIGHT","CHAR_STEP","weaponTypes","DFS","WEAPON_RANGE","BUFFER_DAMAGE_TIME","BUFFER_SHOOTING_TIME","WEAPON_SPAWN_TIME","DAMAGE_ANIMATION_TIME","HP_DAMAGE","GAME_DURATION","CHECK_COLLISION_INTERVAL","COLORS","charStep","hasTakenDamage","weaponCoolingdown","z","originalEvent","pickUpWeapon","X","shootWeapon","moveDir","dirX","dirY","longestSecsHoldingBall","weaponDisplayId","checkCollisionInterval","setUpCreator","creatorId","disappearAfter","disappearTime","clearInterval","ClientModel","receiver","wallInit","playerMoveInDirections","speed","Cell","Board","m","print","numGridRows","numGridCols","numMazeCols","numMazeRows","seedrandom","createStartingMaze","frontier","generateMaze","length","maz","map","tile","table","dirs","neighborTiles","dir","dRow","dCol","filter","tileRow","tileCol","isInGrid","neighbors","newRow","newCol","getNeighborSpace","cell","isInMaze","hasBeenFrontier","addFrontiers","randomRow","random","randomCol","gridToMazePos","otherRow","otherCol","getRandomCell","expandMaze","randomIndex","splice","randomPos","inMazeNeighbors","neighRow","neighCol","breakWall"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fef7cd27bf44e4b9fc93\n **/","import Game from './game.js';\n/* globals io */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const game = new Game();\n  game.run();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/index.js\n **/","import initGame from './components/init.js';\nimport ClientModel from './model/client_model.js';\nimport Board from './board.js';\nconst Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst gameSettings = Constants.gameSettings;\n\nconst socket = io();\n/* globals Crafty */\n/* globals io */\n\nclass Game {\n  constructor() {\n    this.players = {};\n    this.weapons = {};\n    this.playersInfo = {};\n    this.board = null;\n    this.tileBoard = this.createTileBoard();\n    this.selfId = null;\n    this.ball = null;\n    this.translateX = 0;\n    this.translateY = 0;\n  }\n\n\n  run() {\n    // getting the room id from the url params, if any\n    let pageURL = decodeURIComponent(window.location.search.substring(1));\n    let param = pageURL.split('=');\n    let roomId;\n    if (param[0] === 'room_id') {\n      roomId = param[1];\n    }\n\n    this.setUpJoinRoom();\n\n    if (roomId !== undefined) {\n      socket.emit('joinRoom', { roomId: roomId });\n      socket.on('failedToJoin', data => {\n        $('#game').append(`<span class='error-msg'>${ data.msg }</span>`);\n      });\n    } else {\n      this.loadNewRoomButton();\n    }\n  }\n\n  setUpJoinRoom() {\n    socket.on('joinRoom', data => {\n      let param = `?room_id=${ data.roomId }`;\n      $('#game').append(`<span>\n                           Link: amazeball.lilykwan.me/${ param }\n                         </span>`);\n\n      if (data.isNewRoom) {\n        // replace the url with room id query\n        window.history.replaceState({}, '', param);\n        $('#game .new-room').remove();\n      }\n\n      this.start();\n    });\n  }\n\n  loadNewRoomButton() {\n    const makeNewRoomButton = \"<button class='new-room'>Create Room</button>\";\n    $('#game').append(makeNewRoomButton);\n\n    $('#game .new-room').on('click', e => {\n      e.preventDefault();\n      socket.emit('makeNewRoom');\n    });\n  }\n\n  createTileBoard() {\n    let board = new Array(mapGrid.NUM_MAZE_ROWS);\n    for (let i = 0; i < mapGrid.NUM_MAZE_ROWS; i++) {\n      board[i] = new Array(mapGrid.NUM_MAZE_COLS);\n    }\n    return board;\n  }\n\n  start() {\n    initGame(Crafty);\n    Crafty.background('url(../assets/free-space-background-7.png) repeat');\n\n    this.iso = Crafty.diamondIso.init(mapGrid.TILE.WIDTH,\n                                       mapGrid.TILE.SURFACE_HEIGHT,\n                                       mapGrid.NUM_MAZE_ROWS,\n                                       mapGrid.NUM_MAZE_COLS);\n\n    socket.emit('setUpLoadingScene');\n\n    let game = this;\n    Crafty.scene('Loading', function() {\n      game.setUpLoadingScene.bind(game)();\n      this.startGame = this.bind('KeyDown', function(e) {\n        if (e.keyCode === Crafty.keys.S) {\n          socket.emit('startNewGame');\n        }\n      });\n    }, function() {\n      this.unbind('KeyDown', this.startGame);\n    });\n\n    Crafty.scene('Game', (data) => {\n      this.setUpNewGame(data);\n      this.setUpPlayersMovement();\n      this.setUpPlacingWeapons();\n      this.setUpCreateDamage();\n      this.setUpHPChange();\n      this.setUpTimer();\n      this.setUpGameOver();\n      this.setUpAddBall();\n      this.setUpShowBall();\n      this.setUpShowBallRecord();\n      this.setUpHaveWeapon();\n    });\n\n    Crafty.scene('GameOver', (data) => {\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 0, w: 300 })\n            .text('Game Over')\n            .textColor('white');\n\n      let winnerText;\n      if (data.winnerId !== undefined) {\n        winnerText = `player ${ data.winnerId } has\n                won with ${ data.winnerScore } secs`;\n      } else {\n        winnerText = 'No one won!';\n      }\n\n      Crafty.e('2D, DOM, Text')\n        .attr({ x: 50, y: 50, w: 400})\n        .text(winnerText)\n        .textColor('white');\n    });\n\n    Crafty.scene('Loading');\n  }\n\n  setUpLoadingScene() {\n    let loadingScene =\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 0, w: 300 })\n            .text('A-maze Ball - Press s to start')\n            .textColor('white');\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 30, w: 300 })\n            .text(`Game can only be started when\n                   there are more than 2 people in the room`)\n            .textColor('white');\n\n    const assetsObj = {\n      'sprites': {\n        '../assets/tile.png': {\n          'tile': mapGrid.TILE.ORIG_WIDTH,\n          'tileh': mapGrid.TILE.ORIG_HEIGHT,\n          'map': {\n            'tileSprite': [0, 0]\n          }\n        },\n        '../assets/lava_tile.png': {\n          'tile': mapGrid.TILE.ORIG_WIDTH,\n          'tileh': mapGrid.TILE.ORIG_HEIGHT,\n          'map': {\n            'wallSprite': [0, 0]\n          }\n        },\n        '../assets/lava_crack.png': {\n          'tile': mapGrid.TILE.ORIG_WIDTH,\n          'tileh': mapGrid.TILE.ORIG_HEIGHT,\n          'map': {\n            'greenActiveTileSprite': [0, 0]\n          }\n        },\n        '../assets/green_char.png': {\n          'tile': mapGrid.PLAYER.ORIG_WIDTH,\n          'tileh': mapGrid.PLAYER.ORIG_HEIGHT,\n          'map': {\n            'greenSprite': [0, 0]\n          }\n        },\n        '../assets/ball.png': {\n          'tile': mapGrid.BALL.ORIG_WIDTH,\n          'tileh': mapGrid.BALL.ORIG_HEIGHT,\n          'map': {\n            'ballSprite': [0, 0]\n          }\n        },\n        '../assets/flamesword.png': {\n          'tile': mapGrid.BFS.ORIG_WIDTH,\n          'tileh': mapGrid.BFS.ORIG_HEIGHT,\n          'map': {\n            'BFSSprite': [0, 0]\n          }\n        }\n      }\n    };\n\n    Crafty.load(assetsObj);\n\n    let playerTextY = 50;\n    socket.on('joinGame', data => {\n      let playerText = Crafty.e('2D, DOM, Text')\n            .attr({ x: 50, y: playerTextY, w: 200 })\n            .text(`You are player ${data.selfId}`)\n            .textColor(data.playerColor);\n      playerTextY += 30;\n        this.board =\n        new Board(mapGrid.NUM_COLS, mapGrid.NUM_ROWS,\n                  data.seedRandomStr, Crafty, true);\n      this.playersInfo[data.selfId] = playerText;\n      this.selfId = data.selfId;\n\n    });\n\n    socket.on('addNewPlayer', data => {\n      let playerText = Crafty.e('2D, DOM, Text')\n            .attr({ x: 50, y: playerTextY, w: 200 })\n            .text(`connected with player ${ data.playerId }`)\n            .textColor(data.playerColor);\n      playerTextY += 30;\n      this.playersInfo[data.playerId] = playerText;\n    });\n\n    socket.on('othersDisconnected', data => {\n      if (this.players[data.playerId]) {\n        this.players[data.playerId].destroy();\n        delete this.players[data.playerId];\n      }\n\n      if (this.playersInfo[data.playerId]) {\n        this.playersInfo[data.playerId].destroy();\n        delete this.playersInfo[data.playerId];\n      }\n    });\n\n    socket.on('startNewGame', (data) => {\n      Crafty.scene('Game', data);\n    });\n  }\n\n  setUpNewGame(data) {\n    $('#game-status').append(`<div id='hp'>\n                              <h2>HP</h2>\n                             </div>`);\n    $('#game-status').append(`<div id='timer'>\n                              <h2>Timer</h2>\n                              <span id='timer-countdown'>\n                                ${ data.timer }\n                              </span>\n                             </div>`);\n    $('#game-status').append(`<div id='self-record'>\n                                <h2>Ball Duration</h2>\n                                Longest Duration Time: 0\n                                Current Duration Time: 0\n                             </div>`);\n    $('#game-status').append(`<div id='scoreboard'>\n                              <h2>Scoreboard</h2>\n                             </div>`);\n    $('#game-status').append(`<div id=\"weapon\">\n                                <h2>Weapon</h2>\n                                <div id='weapon-img'></div>\n                                <div id='weapon-type'></div>\n                             </div>`);\n    data.players.forEach(playerInfo => {\n      let [playerX, playerY] = playerInfo.playerPx;\n      let [playerRow, playerCol] = playerInfo.playerPos;\n      if (parseInt(playerInfo.playerId) === this.selfId) {\n        let player =\n             Crafty.e('Player, SpriteAnimation, greenSprite')\n                   .setUp(playerInfo.playerId, playerInfo.playerColor)\n                   .setUpSocket(socket)\n                   .setUpSetBallTime()\n                   .bindingKeyEvents()\n                   .attr({ w: mapGrid.PLAYER.WIDTH, h: mapGrid.PLAYER.HEIGHT })\n                   .reel('PlayerMovingRight', 600, 0, 1, 5)\n                   .reel('PlayerMovingDown', 600, 0, 1, 5)\n                   .reel('PlayerMovingUp', 600, 0, 2, 5)\n                   .reel('PlayerMovingLeft', 600, 0, 2, 5);\n\n        // place it on isometric map\n        // this.iso.place(player, playerRow, playerCol, mapGrid.ACTOR_Z);\n        this.iso.place(player, playerRow, playerCol, mapGrid.PLAYER.Z);\n\n        // after placing it on isometric map, figure out the translation of px\n        // from the server side to client side rendering\n        this.translateX = player.x - playerX;\n        this.translateY = player.y - playerY;\n\n        // since the player block always starts at bottom left corner\n        // when rendering, we need to account for the translation so we can\n        // render the player block in the top left corner instead\n        this.translateX += ((mapGrid.TILE.WIDTH - mapGrid.PLAYER.WIDTH) / 2);\n        this.translateY -=\n          ((mapGrid.TILE.SURFACE_HEIGHT - mapGrid.PLAYER.SURFACE_HEIGHT) / 2);\n\n        // translate the player px in the initial rendering as well\n        player.x += ((mapGrid.TILE.WIDTH - mapGrid.PLAYER.WIDTH) / 2);\n        player.y -=\n          ((mapGrid.TILE.SURFACE_HEIGHT - mapGrid.PLAYER.SURFACE_HEIGHT) / 2);\n\n        console.log('player', player.x);\n        console.log('player', player.y);\n\n        $('#hp').append(`<span class='player-${ playerInfo.playerId }'>\n                                  Player ${playerInfo.playerId}: ${ player.HP }\n                                 </span>`);\n        $('#scoreboard').append(`<span class='player-${ playerInfo.playerId }'>\n              Player ${playerInfo.playerId}: ${ player.longestBallHoldingTime }\n                                 </span>`);\n\n        this.players[playerInfo.playerId] = player;\n      } else {\n        let otherPlayer =\n          Crafty.e('OtherPlayer, SpriteAnimation, greenSprite')\n                .setUp(data.players.playerId, playerInfo.playerColor)\n                .attr({ w: mapGrid.PLAYER.WIDTH, h: mapGrid.PLAYER.HEIGHT })\n                .reel('PlayerMovingRight', 600, 0, 1, 5)\n                .reel('PlayerMovingDown', 600, 0, 1, 5)\n                .reel('PlayerMovingUp', 600, 0, 2, 5)\n                .reel('PlayerMovingLeft', 600, 0, 2, 5);\n\n        // place it on isometric map\n        this.iso.place(otherPlayer, playerRow, playerCol, mapGrid.PLAYER.Z);\n\n\n        // translate the player px in the initial rendering as well\n        otherPlayer.x += ((mapGrid.TILE.WIDTH - mapGrid.PLAYER.WIDTH) / 2);\n        otherPlayer.y -=\n          ((mapGrid.TILE.SURFACE_HEIGHT - mapGrid.PLAYER.SURFACE_HEIGHT) / 2);\n\n        $('#hp').append(`<span class='player-${ playerInfo.playerId }'>\n                            Player ${playerInfo.playerId}: ${ otherPlayer.HP }\n                           </span>`);\n        $('#scoreboard').append(`<span class='player-${ playerInfo.playerId }'>\n          Player ${playerInfo.playerId}: 0\n                                 </span>`);\n\n        this.players[playerInfo.playerId] = otherPlayer;\n      }\n    });\n\n    this.createMapEntities();\n  }\n\n  createMapEntities() {\n    for (let i = 0; i < mapGrid.NUM_MAZE_ROWS; i++) {\n      for (let j = 0; j < mapGrid.NUM_MAZE_COLS; j++) {\n        if (this.board.maze[i][j].isWall) {\n          const wallEntity =\n            Crafty.e('Actor, wallSprite')\n                  .attr({ w: mapGrid.TILE.WIDTH, h: mapGrid.TILE.HEIGHT });\n          this.iso.place(wallEntity, i, j, mapGrid.TILE.Z);\n          this.tileBoard[i][j] = wallEntity;\n        } else {\n          const tileEntity =\n            Crafty.e('Tile')\n                  .attr({ w: mapGrid.TILE.WIDTH, h: mapGrid.TILE.HEIGHT });\n          this.iso.place(tileEntity, i, j, mapGrid.TILE.Z);\n          this.tileBoard[i][j] = tileEntity;\n        }\n      }\n    }\n\n    Crafty.viewport.x = mapGrid.GAME_WIDTH / 2;\n    Crafty.viewport.y = 0 + mapGrid.PLAYER.HEIGHT;\n  }\n\n  setUpPlayersMovement() {\n    socket.on('updatePos', data => {\n      const player = this.players[data.playerId];\n      if (player) {\n        let [playerOldX, playerOldY] = [player.x, player.y];\n        player.x = data.x + this.translateX;\n        player.y = data.y + this.translateY;\n\n        // display the animation movement depending on the char move\n        if (data.charMove.left && !player.isPlaying('PlayerMovingLeft')) {\n          player.animate('PlayerMovingLeft', -1);\n          player.unflip('X');\n        } else if (data.charMove.down &&\n            !player.isPlaying('PlayerMovingDown')) {\n          player.animate('PlayerMovingDown', -1);\n          player.unflip('X');\n        } else if (data.charMove.up && !player.isPlaying('PlayerMovingUp')) {\n          player.animate('PlayerMovingUp', -1);\n          player.flip('X');\n        } else if (data.charMove.right &&\n            !player.isPlaying('PlayerMovingRight')) {\n          player.animate('PlayerMovingRight');\n          player.flip('X');\n        }\n      }\n    });\n\n    socket.on('stopMovement', data => {\n      const player = this.players[data.playerId];\n      if (player) {\n        if (data.keyCode === Crafty.keys.RIGHT_ARROW) {\n          if (player.isPlaying('PlayerMovingRight')) player.pauseAnimation();\n          this.charMove.right = false;\n        }\n        if (data.keyCode === Crafty.keys.LEFT_ARROW) {\n          if (player.isPlaying('PlayerMovingLeft')) player.pauseAnimation();\n          this.charMove.left = false;\n        }\n        if (data.keyCode === Crafty.keys.UP_ARROW) {\n          if (player.isPlaying('PlayerMovingUp')) player.pauseAnimation();\n          this.charMove.up = false;\n        }\n        if (data.keyCode === Crafty.keys.DOWN_ARROW) {\n          if (player.isPlaying('PlayerMovingDown')) player.pauseAnimation();\n          this.charMove.down = false;\n        }\n      }\n    });\n  }\n\n  setUpPlacingWeapons() {\n    socket.on('addWeapon', data => {\n      const weapon = Crafty.e('Weapon')\n                           .setUpStaticPos(data.row, data.col)\n                           .setUp(data.type);\n\n      if (data.type === 'BFS') {\n        weapon.addComponent('BFSSprite')\n              .attr({ w: mapGrid.BFS.WIDTH, h: mapGrid.BFS.HEIGHT });\n      // } else if (data.type === 'DFS') {\n      //   weapon.addComponent('spr_dfs')\n      //         .attr({ w: mapGrid.DFS_WIDTH, h: mapGrid.DFS_HEIGHT });\n      }\n      this.weapons[[data.row, data.col]] = weapon;\n      this.iso.place(weapon, data.row, data.col, mapGrid.BFS.Z);\n    });\n\n    socket.on('destroyWeapon', data => {\n      const weapon = this.weapons[[data.row, data.col]];\n      weapon.destroy();\n    });\n  }\n\n  setUpCreateDamage() {\n    socket.on('createDamage', data => {\n      let activeComponent = 'greenActiveTileSprite';\n      this.tileBoard[data.row][data.col].removeComponent('tileSprite');\n      this.tileBoard[data.row][data.col].addComponent(activeComponent)\n                    .attr({ w: mapGrid.TILE.WIDTH, h: mapGrid.TILE.HEIGHT });\n      this.tileBoard[data.row][data.col].damageDisappearAfter(activeComponent);\n    });\n  }\n\n  setUpHPChange() {\n    socket.on('HPChange', data => {\n      const player = this.players[data.playerId];\n      if (player) {\n        player.HP = data.playerHP;\n        $(`#hp .player-${ data.playerId }`)\n          .text(`Player ${data.playerId}: ${ data.playerHP }`);\n      }\n    });\n  }\n\n  setUpTimer() {\n    socket.on('countDown', data => {\n      $('#timer-countdown').text(data.timer);\n    });\n  }\n\n  setUpGameOver() {\n    socket.on('gameOver', data => {\n      Crafty.scene('GameOver', data);\n    });\n  }\n\n  setUpAddBall() {\n    socket.on('addBall', data => {\n      this.ball = Crafty.e('Ball, swordSprite')\n          .attr({ w: mapGrid.BALL.WIDTH, h: mapGrid.BALL.HEIGHT });\n\n      this.iso.place(this.ball, data.row, data.col, mapGrid.BALL.Z);\n    });\n  }\n\n  setUpShowBall() {\n    socket.on('showBall', data => {\n      this.ball.destroy();\n      this.players[data.playerId].pickUpBall();\n    });\n\n    socket.on('loseBall', data => {\n      this.players[data.playerId]\n                  .color('black');\n    });\n  }\n\n  setUpShowBallRecord() {\n    socket.on('showSelfScore', data => {\n      $('#self-record')\n        .html(`\n          <h2>Ball Duration</h2>\n          <span>\n            Longest Duration Time: ${ data.longestBallHoldingTime }\n          </span>\n          <span>\n            Current Duration Time: ${ data.currentBallHoldingTime }\n          </span>`);\n    });\n\n    socket.on('showScoreboard', data => {\n      $(`#scoreboard .player-${ data.playerId }`).text(\n        `Player ${data.playerId}: ${ data.score }`);\n    });\n  }\n\n  setUpHaveWeapon() {\n    socket.on('pickUpWeapon', data => {\n      this.players[this.selfId].weaponType = data.type;\n      $('#weapon-type').text(data.type);\n      if (data.type === 'BFS') {\n        $('#weapon-img').html(`<img src='../assets/bfs_weapon.png'\n                                      height='50'></img>`);\n      } else if (data.type === 'DFS') {\n        $('#weapon-img').html(`<img src='../assets/dfs_weapon.png'\n                                      height='50'></img>`);\n      }\n    });\n\n    socket.on('loseWeapon', data => {\n      this.players[data.playerId].loseWeapon();\n      $('#weapon-type').empty();\n      $('#weapon-img').empty();\n    });\n  }\n}\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/game.js\n **/","var createComponents = require('./components.js');\nvar createPlayerComponent = require('./player.js');\nvar createWeaponComponent = require('./weapon.js');\nvar createBallComponent = require('./ball.js');\nconst Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\n\nmodule.exports = function(Crafty) {\n  // change name of the html element to stage\n  Crafty.init(mapGrid.GAME_WIDTH, mapGrid.GAME_HEIGHT, 'stage');\n\n  createComponents(Crafty);\n  createPlayerComponent(Crafty);\n  createWeaponComponent(Crafty);\n  createBallComponent(Crafty);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/init.js\n **/","const Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\nconst gameSettings = Constants.gameSettings;\n/* globals Crafty */\n\nlet epsilon = 0.000000001;\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Cell', {\n    init: function() {\n      this.attr({\n        w: mapGrid.TILE.WIDTH,\n        h: mapGrid.TILE.HEIGHT\n      });\n    },\n\n    at: function(row, col) {\n      // the amount to move from one neighbor to the other\n      const w = (mapGrid.TILE.WIDTH / 2);\n      const h = (mapGrid.TILE.WIDTH / 4);\n\n      const x = (row - col) * w;\n      const y = (row + col) * h;\n      this.attr({ x: x, y: y });\n      return this;\n    },\n\n    getRowsCols: function() {\n      const w = (mapGrid.TILE.WIDTH / 2);\n      const h = (mapGrid.TILE.SURFACE_HEIGHT / 2);\n\n      const xOverW = this.x / w;\n      const yOverH = this.y / h;\n\n      // (x/w) + (y/h) = 2*r\n      const row = this.fixRoundingErrors((xOverW + yOverH) / 2);\n      const col = this.fixRoundingErrors(row - xOverW);\n\n      // const bottomRightX = this.x + mapGrid.PLAYER_WIDTH;\n      // const bottomRightY = this.y + mapGrid.SURFACE_HEIGHT;\n      // const xOverWBR = bottomRightX / w;\n      // const yOverHBR = bottomRightY / h;\n      // const rowBR = this.fixRoundingErrors((xOverWBR + yOverHBR) / 2);\n      // const colBR = this.fixRoundingErrors(rowBR - xOverWBR);\n\n      // finding all the rows it is at\n      let rows = [Math.floor(row)];\n      // if (((row - Math.floor(row)) * w - (mapGrid.PLAYER_WIDTH / 2)) > epsilon) {\n\n      // if the offset of the block + half the width of the block is more than\n      // the width of half a tile, then it is overlapping two rows\n      let spaceOccupyingX = (row - Math.floor(row)) * w\n                              + (mapGrid.PLAYER.WIDTH / 2);\n      if ((spaceOccupyingX - w) > epsilon) {\n        // console.log('really?');\n        // console.log((row - Math.floor(row)) * w);\n        // console.log(mapGrid.PLAYER_WIDTH / 2);\n        // console.log(w);\n        rows.push(Math.ceil(row));\n      }\n\n      // finding all the cols it is at\n      let cols = [Math.floor(col)];\n      // if (Math.floor(col) !== Math.floor(colBR)) {\n      let spaceOccupyingY = (col - Math.floor(col)) * h\n                            + (mapGrid.PLAYER.SURFACE_HEIGHT / 2);\n      if ((spaceOccupyingY - h) > epsilon) {\n        // rows.push(Math.floor(colBR));\n        cols.push(Math.ceil(col));\n      }\n      // if (Math.floor(col) !== Math.ceil(col)) {\n      // if ((col - Math.floor(col)) * h - (mapGrid.PLAYER_WIDTH / 4) > epsilon) {\n      //   cols.push(Math.ceil(col));\n      // }\n\n      return [rows, cols];\n    },\n\n    // account for the floating point epsilon\n    fixRoundingErrors: function(n) {\n      return (Math.abs(n - Math.round(n)) <= epsilon) ? Math.round(n) : n;\n    }\n  });\n\n  Crafty.c('Actor', {\n    init: function() {\n      this.requires('2D, DOM, Cell');\n    },\n  });\n\n  Crafty.c('Item', {\n    init: function() {\n\n    },\n\n    // for items that are in a static position\n    setUpStaticPos(row, col) {\n      this.staticRow = row;\n      this.staticCol = col;\n      return this;\n    }\n  });\n\n  Crafty.c('Tile', {\n    init: function() {\n      this.requires('2D, DOM, tileSprite');\n    },\n\n    damageDisappearAfter: function(activeTileSprite) {\n      window.setTimeout(() => {\n        this.removeComponent(activeTileSprite);\n        this.addComponent('tileSprite')\n            .attr({ w: mapGrid.TILE.WIDTH, h: mapGrid.TILE.HEIGHT });\n      }, gameSettings.DAMAGE_DISAPPEAR_TIME);\n    }\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/components.js\n **/","const NUM_ROWS = 8;\nconst NUM_COLS = 8;\nconst NUM_MAZE_ROWS =  NUM_ROWS * 2 - 1;\nconst NUM_MAZE_COLS = NUM_COLS * 2 - 1;\n\nconst TILE = {\n  ORIG_WIDTH: 101,\n  ORIG_HEIGHT: 122,\n  RATIO: 3 / 4,\n  Z: 0\n};\n\nconst PLAYER = {\n  ORIG_WIDTH: 40,\n  ORIG_HEIGHT: 54,\n  RATIO: 1\n};\n\nconst BALL = {\n  ORIG_WIDTH: 70,\n  ORIG_HEIGHT: 70,\n  RATIO: 1\n};\n\nconst BFS = {\n  ORIG_WIDTH: 194,\n  ORIG_HEIGHT: 204,\n  RATIO: 1 / 4\n};\n\n[TILE, PLAYER, BALL, BFS].forEach(actor => {\n  actor.WIDTH = actor.ORIG_WIDTH * actor.RATIO;\n  actor.HEIGHT = actor.ORIG_HEIGHT * actor.RATIO;\n  actor.SURFACE_HEIGHT = actor.WIDTH / 2;\n});\n\n[PLAYER, BALL, BFS].forEach(actor => {\n  const y0 = (TILE.HEIGHT / TILE.SURFACE_HEIGHT - 2) * TILE.SURFACE_HEIGHT;\n  // need to increase it by player depth\n  const y1 = y0 + (PLAYER.HEIGHT - PLAYER.SURFACE_HEIGHT);\n  // finding the z layer based on the craftyjs code\n  actor.Z = (y1 - ((PLAYER.HEIGHT / TILE.SURFACE_HEIGHT - 2) *\n              PLAYER.SURFACE_HEIGHT)) / TILE.SURFACE_HEIGHT;\n  // actor.Z = ((PLAYER.HEIGHT - PLAYER.SURFACE_HEIGHT) /\n  //           ((TILE.HEIGHT - TILE.SURFACE_HEIGHT) / ACTOR_Z)) + 1;\n  // actor.Z = (((PLAYER_HEIGHT / TILE.SURFACE_HEIGHT) - 2) * TILE.SURFACE_HEIGHT\n});\n  console.log(PLAYER.Z);\n  console.log(BALL.Z);\n  console.log(BFS.Z);\n\n// const TILE_ORIG_WIDTH = 101;\n// const TILE_ORIG_HEIGHT = 122;\n// const TILE_RATIO = (1 / 2);\n// const TILE_WIDTH = TILE_ORIG_WIDTH * TILE_RATIO;\n// const TILE_HEIGHT = TILE_ORIG_HEIGHT * TILE_RATIO;\n// const TILE_SURFACE_HEIGHT = TILE_WIDTH / 2;\n\n// const [PLAYER_ORIG_WIDTH, PLAYER_ORIG_HEIGHT] = [40, 54];\n// const [PLAYER_ORIG_WIDTH, PLAYER_ORIG_HEIGHT] = [101, 122];\n// const PLAYER_RATIO = (1 / 2);\n// const PLAYER_WIDTH = PLAYER_ORIG_WIDTH * PLAYER_RATIO;\n// const PLAYER_HEIGHT = PLAYER_ORIG_HEIGHT * PLAYER_RATIO;\n// const PLAYER_SURFACE_HEIGHT = PLAYER_WIDTH / 2;\n// the z layer if it was the same height as the tile\n\nconst mapGrid = {\n  GAME_WIDTH: NUM_MAZE_ROWS * TILE.WIDTH,\n  // CHANGE TILE HEIGHT TO CHAR HEIGHT\n  GAME_HEIGHT: NUM_MAZE_COLS * TILE.SURFACE_HEIGHT + PLAYER.HEIGHT,\n  NUM_ROWS: NUM_ROWS,\n  NUM_COLS: NUM_COLS,\n  NUM_MAZE_ROWS: NUM_MAZE_ROWS,\n  NUM_MAZE_COLS: NUM_MAZE_COLS,\n  TILE: TILE,\n  PLAYER: PLAYER,\n  BALL: BALL,\n  BFS: BFS,\n  DFS_WIDTH: 25,\n  DFS_HEIGHT: 0.30 * 25,\n  BFS_WIDTH: 20,\n  BFS_HEIGHT: 0.70 * 20,\n  CHAR_STEP: 20 // how many steps it needs from one tile to another\n};\n\nconst weaponTypes = {\n  BFS: 'BFS',\n  DFS: 'DFS'\n};\n\nconst gameSettings = {\n  WEAPON_RANGE: 10,\n  BUFFER_DAMAGE_TIME: 1000,\n  BUFFER_SHOOTING_TIME: 1500,\n  WEAPON_SPAWN_TIME: 3000,\n  DAMAGE_ANIMATION_TIME: 100,\n  DAMAGE_DISAPPEAR_TIME: 1000,\n  HP_DAMAGE: 10,\n  GAME_DURATION: 2000, // 200\n  CHECK_COLLISION_INTERVAL: 200, \n  COLORS: ['blue', 'red', 'yellow', 'green']\n};\n\nmodule.exports = {\n  mapGrid: mapGrid,\n  weaponTypes: weaponTypes,\n  gameSettings: gameSettings\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/constants.js\n **/","/* globals Crafty */\nconst Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Player', {\n    init: function() {\n      this.requires('Actor, Collision, Color');\n      this.HP = 100;\n      this.charStep = mapGrid.CHAR_STEP;\n      this.hasTakenDamage = false;\n      this.longestBallHoldingTime = 0;\n      this.currentBallHoldingTime = 0;\n      this.weaponType = null;\n      this.weaponCoolingdown = false;\n      this.z = 9;\n    },\n\n    bindingKeyEvents() {\n      this.charMove = { left: false, right: false, up: false, down: false };\n\n      this.bind('EnterFrame', function() {\n        if (this.charMove.right || this.charMove.left ||\n            this.charMove.up || this.charMove.down) {\n          this.socket.emit('updatePos', {\n            playerId: this.playerId,\n            charMove: this.charMove\n          });\n        }\n      });\n\n      this.bind('KeyDown', function(e) {\n        e.originalEvent.preventDefault();\n        this.charMove.left = false;\n        this.charMove.right = false;\n        this.charMove.down = false;\n        this.charMove.up = false;\n\n        if (e.keyCode === Crafty.keys.RIGHT_ARROW) {\n          this.charMove.right = true;\n        }\n        if (e.keyCode === Crafty.keys.LEFT_ARROW) {\n          this.charMove.left = true;\n        }\n        if (e.keyCode === Crafty.keys.UP_ARROW) {\n          this.charMove.up = true;\n        }\n        if (e.keyCode === Crafty.keys.DOWN_ARROW) {\n          this.charMove.down = true;\n        }\n\n        if (e.keyCode === Crafty.keys.Z) {\n          this.pickUpWeapon();\n        }\n\n        if (e.keyCode === Crafty.keys.X && this.weaponType !== null) {\n          this.shootWeapon();\n        }\n      });\n\n      this.bind('KeyUp', function(e) {\n        if (e.keyCode === Crafty.keys.RIGHT_ARROW) {\n          this.charMove.right = false;\n        }\n        if (e.keyCode === Crafty.keys.LEFT_ARROW) {\n          this.charMove.left = false;\n        }\n        if (e.keyCode === Crafty.keys.UP_ARROW) {\n          this.charMove.up = false;\n        }\n        if (e.keyCode === Crafty.keys.DOWN_ARROW) {\n          this.charMove.down = false;\n        }\n        this.socket.emit('stopMovement', {\n          playerId: this.playerId,\n          keyCode: e.keyCode\n        });\n      });\n\n      return this;\n    },\n\n    moveDir(dirX, dirY) {\n      // the offset it needs to move to the neighbor blocks\n      const w = mapGrid.TILE.WIDTH / 2;\n      const h = mapGrid.TILE.SURFACE_HEIGHT / 2;\n\n      this.x += (w / this.charStep) * dirX;\n      this.y += (h / this.charStep) * dirY;\n    },\n\n    setUp: function(playerId, playerColor) {\n      this.playerId = playerId;\n      if (playerColor) {\n        this.playerColor = playerColor;\n      }\n      return this;\n    },\n\n    setUpSocket: function(socket) {\n      this.socket = socket;\n      return this;\n    },\n\n    setUpSetBallTime: function() {\n      this.socket.on('setBallTime', data => {\n        this.currentBallHoldingTime = data.currentBallHoldingTime;\n        this.longestSecsHoldingBall = data.longestSecsHoldingBall;\n      });\n\n      return this;\n    },\n\n    pickUpWeapon: function() {\n      this.socket.emit('pickUpWeapon', {\n        playerId: this.playerId\n      });\n    },\n\n    pickUpBall: function() {\n      this.color('white');\n      return this;\n    },\n\n    shootWeapon: function() {\n      this.socket.emit('shootWeapon', {\n        playerId: this.playerId\n      });\n    },\n\n    loseWeapon: function() {\n      this.weaponType = null;\n    }\n  });\n\n  Crafty.c('OtherPlayer', {\n    init: function() {\n      this.requires('2D, DOM, Tile, Color');\n      this.HP = 100;\n    },\n\n    setUp: function(playerId, playerColor, weaponDisplayId) {\n      this.playerId = playerId;\n\n      if (playerColor) {\n        this.playerColor = playerColor;\n      }\n\n      if (weaponDisplayId) {\n        this.weaponDisplayId = weaponDisplayId;\n      }\n\n      return this;\n    },\n\n    pickUpBall: function() {\n      this.color('white');\n      return this;\n    },\n\n    loseWeapon: function() {\n\n    }\n\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/player.js\n **/","/* globals Crafty */\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Weapon', {\n    init: function() {\n      this.requires('Actor, Item');\n    },\n\n    setUp: function(type) {\n      this.type = type;\n      return this;\n    }\n  });\n\n  Crafty.c('Damage', {\n    init: function() {\n      this.requires('Actor, Item');\n      this.checkCollisionInterval = null;\n    },\n\n    setUpCreator(playerId) {\n      this.creatorId = playerId;\n      return this;\n    },\n\n    disappearAfter(disappearTime) {\n      setTimeout(() => {\n        if (this.checkCollisionInterval) {\n          clearInterval(this.checkCollisionInterval);\n        }\n        this.destroy();\n      }, disappearTime);\n      return this;\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/weapon.js\n **/","/* globals Crafty */\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Ball', {\n    init: function() {\n      this.requires('Actor, Item');\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/ball.js\n **/","let ClientModel = {\n  receiver: 'CLIENT',\n  wallInit: function() {\n    this.requires('2D, Canvas, Solid, Color, Collision');\n  },\n  playerMoveInDirections: function(speed) {\n\n  }\n };\n\nmodule.exports = ClientModel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/model/client_model.js\n **/","const Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst Cell = require('./cell.js');\n\nclass Board {\n  constructor(m, n, seedRandomStr, print) {\n    // how many cells rows and cols are there if walls were just borders\n    this.numGridRows = m;\n    this.numGridCols = n;\n    // for the 2d array with the walls as part of the cells\n    this.numMazeCols = (2 * n) - 1;\n    this.numMazeRows = (2 * m) - 1;\n\n    Math.seedrandom(seedRandomStr);\n    this.maze = this.createStartingMaze();\n    this.frontier = [];\n    this.generateMaze();\n    if (print) this.log(this.maze);\n  }\n\n  // create a starting maze map with all the walls\n  createStartingMaze() {\n    let maze = new Array(this.numMazeRows);\n    for (let i = 0; i < maze.length; i++) {\n      maze[i] = new Array(this.numMazeCols);\n      for (let j = 0; j < this.numMazeCols; j++) {\n        if (i % 2 === 1) {\n          // the odd number rows are all filled with wall\n          maze[i][j] = new Cell(true);\n        } else {\n          // the odd number cols are walls and the even number cols are spaces\n          maze[i][j] = (j % 2 === 1) ? new Cell(true) : new Cell(false);\n        }\n      }\n    }\n    return maze;\n  }\n\n  gridToMazePos(row, col) {\n    return [row * 2, col * 2];\n  }\n\n  log(maze) {\n    let maz = maze.map(row => {\n      return row.map(tile => {\n        if (tile.isWall) return 1;\n        if (!tile.isWall) return 0;\n      });\n    });\n    console.table(maz);\n  }\n\n  // getting direct neighbor tiles that are not walls\n  getNeighborTiles(row, col) {\n    let dirs = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n    let neighborTiles = dirs.map(dir => {\n      let [dRow, dCol] = dir;\n      return [row + dRow, col + dCol];\n    });\n\n    // return the tiles that are in the grid and\n    // tiles that are not walls\n    return neighborTiles.filter(([tileRow, tileCol]) => {\n      return this.isInGrid(tileRow, tileCol) &&\n        !this.maze[tileRow][tileCol].isWall;\n    });\n  }\n\n  // getting the neighbor cells separated by a wall\n  getNeighborSpace(row, col) {\n    let dirs = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n    let neighbors = [];\n    dirs.forEach(dir => {\n      // multiplying by 2 to account for the wall in between\n      let [newRow, newCol] = [row + dir[0] * 2, col + dir[1] * 2];\n      if (this.isInGrid(newRow, newCol)) {\n        // ensure that we are not adding walls\n        if (this.maze[newRow][newCol].isWall === true) {\n          throw \"Error: adding walls to the neighbor space array\";\n        }\n\n        neighbors.push([newRow, newCol]);\n      }\n    });\n\n    return neighbors;\n  }\n\n  // the forefront surrounding the cells that are in the maze\n  addFrontiers(row, col) {\n    this.getNeighborSpace(row, col).forEach(cell => {\n      let [newRow, newCol] = cell;\n      if (!this.maze[newRow][newCol].isInMaze &&\n          !this.maze[newRow][newCol].hasBeenFrontier) {\n        this.frontier.push([newRow, newCol]);\n        this.maze[newRow][newCol].hasBeenFrontier = true;\n      }\n    });\n  }\n\n  isInGrid(row, col) {\n    return 0 <= row && row < this.numMazeRows &&\n           0 <= col && col < this.numMazeCols;\n  }\n\n  inMazeNeighbors(row, col) {\n    return this.getNeighborSpace(row, col).filter(cell => {\n      let [newRow, newCol] = cell;\n      return this.maze[newRow][newCol].isInMaze;\n    });\n  }\n\n  expandMaze(row, col) {\n    this.maze[row][col].isInMaze = true;\n    this.addFrontiers(row, col);\n  }\n\n  getRandomCell() {\n    const randomRow = Math.floor(Math.random() * (this.numGridRows - 1));\n    const randomCol = Math.floor(Math.random() * (this.numGridCols - 1));\n\n    return this.gridToMazePos(randomRow, randomCol);\n  }\n\n  // breaking the wall between [row, col] and [otherRow, otherCol]\n  breakWall(row, col, otherRow, otherCol) {\n    if ((otherRow < row) && col === otherCol) { // other cell is on top of cell\n      this.maze[row - 1][col].isWall = false;\n    } else if ((otherRow > row) && col === otherCol) { // other cell is bottom\n      this.maze[row + 1][col].isWall = false;\n    } else if ((otherCol < col) && row === otherRow) { // other cell is left\n      this.maze[row][col - 1].isWall = false;\n    } else if ((otherCol > col) && row === otherRow) { // other cell is right\n      this.maze[row][col + 1].isWall = false;\n    }\n  }\n\n  generateMaze() {\n    let [randomCol, randomRow] = this.getRandomCell();\n    this.expandMaze(randomRow, randomCol);\n\n    // find a random frontier, find a random neighbor of that frontier,\n    // and break the walls between them\n    while (this.frontier.length !== 0) {\n      const randomIndex = Math.floor(Math.random() * this.frontier.length);\n      const [randomPos] = this.frontier.splice(randomIndex, 1);\n      const [row, col] = randomPos;\n      const neighbors = this.inMazeNeighbors(row, col);\n      const [neighRow, neighCol] =\n        neighbors[Math.floor(Math.random() * neighbors.length)];\n\n      this.breakWall(row, col, neighRow, neighCol);\n      this.expandMaze(row, col);\n    }\n  }\n}\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/board.js\n **/","class Cell {\n  constructor(isWall) {\n    this.isWall = isWall;\n    this.isInMaze = false;\n    this.hasBeenFrontier = false;\n  }\n}\n\nmodule.exports = Cell;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/cell.js\n **/"],"sourceRoot":""}