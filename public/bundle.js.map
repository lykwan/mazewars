{"version":3,"sources":["webpack:///webpack/bootstrap 529d3346740383192c81","webpack:///./public/src/index.js","webpack:///./public/src/game.js","webpack:///./public/src/components/canvas.js","webpack:///./public/src/components/entities.js","webpack:///./public/src/constants.js","webpack:///./public/src/components/player.js","webpack:///./public/src/components/weapon.js","webpack:///./public/src/components/ball.js","webpack:///./public/src/model/client_model.js","webpack:///./public/src/board.js","webpack:///./public/src/tile.js"],"names":["document","addEventListener","game","run","Constants","require","mapGrid","wallDirection","socket","io","Game","players","weapons","playersInfo","board","selfId","ball","NUM_ROWS","TILE_WIDTH","NUM_COLS","TILE_HEIGHT","pageURL","decodeURIComponent","window","location","search","substring","param","split","roomId","setUpJoinRoom","undefined","emit","on","$","append","data","msg","loadNewRoomButton","isNewRoom","history","replaceState","remove","start","makeNewRoomButton","e","preventDefault","Crafty","background","scene","setUpLoadingScene","bind","startGame","keyCode","keys","S","console","log","unbind","setUpNewGame","setUpPlayersMove","setUpPlacingWeapons","setUpCreateDamage","setUpHPChange","setUpTimer","setUpGameOver","setUpAddBall","setUpShowBall","setUpShowBallRecord","setUpHaveWeapon","attr","x","y","w","text","textColor","winnerText","winnerId","winnerScore","loadingScene","sprite","spr_red","spr_green","spr_blue","spr_yellow","spr_ball","spr_bfs","spr_dfs","playerTextY","playerText","playerColor","seedRandomStr","playerId","destroy","timer","forEach","parseInt","playerInfo","player","at","playerPos","setUp","setUpSocket","setUpSetBallTime","bindingKeyEvents","addComponent","PLAYER_WIDTH","h","PLAYER_HEIGHT","HP","longestBallHoldingTime","otherPlayer","i","j","grid","drawWalls","weapon","type","BFS_WIDTH","BFS_HEIGHT","DFS_WIDTH","DFS_HEIGHT","col","getCol","row","getRow","damageCell","setUpCreator","creatorId","disappearAfter","disappearTime","color","playerHP","BALL_WIDTH","BALL_HEIGHT","pickUpBall","html","currentBallHoldingTime","score","weaponType","loseWeapon","empty","createComponents","createPlayerComponent","createWeaponComponent","createBallComponent","module","exports","model","width","height","init","c","WALL_THICKNESS","Math","floor","requires","z","wallDir","wall","HORIZONTAL","VERTICAL","receiver","atWall","offset","offSetX","offsetY","weaponTypes","BFS","DFS","gameSettings","WEAPON_RANGE","BUFFER_DAMAGE_TIME","BUFFER_SHOOTING_TIME","WEAPON_SPAWN_TIME","DAMAGE_ANIMATION_TIME","DAMAGE_DISAPPEAR_TIME","HP_DAMAGE","GAME_DURATION","COLORS","charSpeed","hasTakenDamage","weaponCoolingdown","charMove","left","right","up","down","RIGHT_ARROW","LEFT_ARROW","UP_ARROW","DOWN_ARROW","Z","pickUpWeapon","X","shootWeapon","longestSecsHoldingBall","weaponDisplayId","setTimeout","ClientModel","wallInit","playerMoveInDirections","speed","Tile","DIRECTION","top","bottom","OPPOSITE","Board","n","m","numCols","numRows","seedrandom","createGrid","frontier","createMaze","Array","length","dirs","newX","dir","newY","isInGrid","isInMaze","hasBeenFrontier","push","neighbors","otherX","otherY","addFrontiers","randomX","random","randomY","expandMaze","randomIndex","splice","randomPos","inMazeNeighbors","neighX","neighY","direction","walls","Object","filter"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 529d3346740383192c81\n **/","import Game from './game.js';\n/* globals io */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const game = new Game();\n  game.run();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/index.js\n **/","import createCanvas from './components/canvas.js';\nimport createComponents from './components/entities.js';\nimport createPlayerComponent from './components/player.js';\nimport ClientModel from './model/client_model.js';\nimport Board from './board.js';\nconst Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n\nconst socket = io();\n/* globals Crafty */\n/* globals io */\n\nclass Game {\n  constructor() {\n    this.players = {};\n    this.weapons = {};\n    this.playersInfo = {};\n    this.board = null;\n    this.selfId = null;\n    this.ball = null;\n  }\n\n  width() {\n    return mapGrid.NUM_ROWS * mapGrid.TILE_WIDTH;\n  }\n\n  height() {\n    return mapGrid.NUM_COLS * mapGrid.TILE_HEIGHT;\n  }\n\n  run() {\n    // getting the room id from the url params, if any\n    let pageURL = decodeURIComponent(window.location.search.substring(1));\n    let param = pageURL.split('=');\n    let roomId;\n    if (param[0] === 'room_id') {\n      roomId = param[1];\n    }\n\n    this.setUpJoinRoom();\n\n    if (roomId !== undefined) {\n      socket.emit('joinRoom', { roomId: roomId });\n      socket.on('failedToJoin', data => {\n        $('#game').append(`<span class='error-msg'>${ data.msg }</span>`);\n      });\n    } else {\n      this.loadNewRoomButton();\n    }\n  }\n\n  setUpJoinRoom() {\n    socket.on('joinRoom', data => {\n      let param = `?room_id=${ data.roomId }`;\n      $('#game').append(`<span>\n                           Link: amazeball.lilykwan.me/${ param }\n                         </span>`);\n\n      if (data.isNewRoom) {\n        // replace the url with room id query\n        window.history.replaceState({}, '', param);\n        $('#game .new-room').remove();\n      }\n\n      this.start();\n    });\n  }\n\n  loadNewRoomButton() {\n    const makeNewRoomButton = \"<button class='new-room'>Create Room</button>\";\n    $('#game').append(makeNewRoomButton);\n\n    $('#game .new-room').on('click', e => {\n      e.preventDefault();\n      socket.emit('makeNewRoom');\n    });\n  }\n\n  start() {\n    createCanvas(Crafty, ClientModel);\n    //TODO: DELETE MODEL\n    Crafty.background('url(../assets/free-space-background-7.png) repeat');\n\n    socket.emit('setUpLoadingScene');\n\n    let game = this;\n    Crafty.scene('Loading', function() {\n      game.setUpLoadingScene.bind(game)();\n      this.startGame = this.bind('KeyDown', function(e) {\n        if (e.keyCode === Crafty.keys.S) {\n          console.log('got here!!!!!');\n          socket.emit('startNewGame');\n        }\n      });\n    }, function() {\n      this.unbind('KeyDown', this.startGame);\n    });\n\n    Crafty.scene('Game', (data) => {\n      this.setUpNewGame(data);\n      this.setUpPlayersMove();\n      this.setUpPlacingWeapons();\n      this.setUpCreateDamage();\n      this.setUpHPChange();\n      this.setUpTimer();\n      this.setUpGameOver();\n      this.setUpAddBall();\n      this.setUpShowBall();\n      this.setUpShowBallRecord();\n      this.setUpHaveWeapon();\n    });\n\n    Crafty.scene('GameOver', (data) => {\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 0, w: 300 })\n            .text('Game Over')\n            .textColor('white');\n\n      let winnerText;\n      if (data.winnerId !== undefined) {\n        winnerText = `player ${ data.winnerId } has\n                won with ${ data.winnerScore } secs`;\n      } else {\n        winnerText = 'No one won!';\n      }\n\n      Crafty.e('2D, DOM, Text')\n        .attr({ x: 50, y: 50, w: 400})\n        .text(winnerText)\n        .textColor('white');\n    });\n\n    Crafty.scene('Loading');\n  }\n\n  setUpLoadingScene() {\n    let loadingScene =\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 0, w: 300 })\n            .text('A-maze Ball - Press s to start')\n            .textColor('white');\n      Crafty.e('2D, DOM, Text')\n            .attr({ x: 0, y: 30, w: 300 })\n            .text(`Game can only be started when\n                   there are more than 2 people in the room`)\n            .textColor('white');\n\n\n\n    // Crafty.load(['../assets/blue.png',\n    //              '../assets/green.png',\n    //              '../assets/red.png',\n    //              '../assets/yellow.png'],\n    //   function() {\n    //     Crafty.sprite(\"../assets/red.png\", {spr_red:[0,0,174,116]});\n    //     Crafty.sprite(\"../assets/green.png\", {spr_green:[0,0,166,108]});\n    //     Crafty.sprite(\"../assets/blue.png\", {spr_blue:[0,0,154,100]});\n    //     Crafty.sprite(\"../assets/yellow.png\", {spr_yellow:[0,0,167,128]});\n    //   });\n\n    Crafty.sprite(\"../assets/red.png\", {spr_red:[0,0,174,116]});\n    Crafty.sprite(\"../assets/green.png\", {spr_green:[0,0,166,108]});\n    Crafty.sprite(\"../assets/blue.png\", {spr_blue:[0,0,154,100]});\n    Crafty.sprite(\"../assets/yellow.png\", {spr_yellow:[0,0,167,128]});\n    Crafty.sprite(\"../assets/ball.png\", {spr_ball:[0,0,144,144]});\n    Crafty.sprite(\"../assets/bfs_weapon.png\", {spr_bfs:[0,0,144,102]});\n    Crafty.sprite(\"../assets/dfs_weapon.png\", {spr_dfs:[0,0,288,88]});\n\n    let playerTextY = 50;\n    socket.on('joinGame', data => {\n      console.log(data.selfId);\n      let playerText = Crafty.e('2D, DOM, Text')\n            .attr({ x: 50, y: playerTextY, w: 200 })\n            .text(`You are player ${data.selfId}`)\n            .textColor(data.playerColor);\n      playerTextY += 30;\n      this.board =\n        new Board(mapGrid.NUM_COLS, mapGrid.NUM_ROWS, data.seedRandomStr);\n      this.playersInfo[data.selfId] = playerText;\n      this.selfId = data.selfId;\n\n    });\n\n    socket.on('addNewPlayer', data => {\n      let playerText = Crafty.e('2D, DOM, Text')\n            .attr({ x: 50, y: playerTextY, w: 200 })\n            .text(`connected with player ${ data.playerId }`)\n            .textColor(data.playerColor);\n      playerTextY += 30;\n      this.playersInfo[data.playerId] = playerText;\n    });\n\n    socket.on('othersDisconnected', data => {\n      if (this.players[data.playerId]) {\n        this.players[data.playerId].destroy();\n        delete this.players[data.playerId];\n      }\n\n      if (this.playersInfo[data.playerId]) {\n        this.playersInfo[data.playerId].destroy();\n        delete this.playersInfo[data.playerId];\n      }\n    });\n\n    socket.on('startNewGame', (data) => {\n      Crafty.scene('Game', data);\n    });\n  }\n\n  setUpNewGame(data) {\n    $('#game-status').append(`<div id='hp'>\n                              <h2>HP</h2>\n                             </div>`);\n    $('#game-status').append(`<div id='timer'>\n                              <h2>Timer</h2>\n                              <span id='timer-countdown'>\n                                ${ data.timer }\n                              </span>\n                             </div>`);\n    $('#game-status').append(`<div id='self-record'>\n                                <h2>Ball Duration</h2>\n                                Longest Duration Time: 0\n                                Current Duration Time: 0\n                             </div>`);\n    $('#game-status').append(`<div id='scoreboard'>\n                              <h2>Scoreboard</h2>\n                             </div>`);\n    $('#game-status').append(`<div id=\"weapon\">\n                                <h2>Weapon</h2>\n                                <div id='weapon-img'></div>\n                                <div id='weapon-type'></div>\n                             </div>`);\n    data.players.forEach(playerInfo => {\n      if (parseInt(playerInfo.playerId) === this.selfId) {\n        let player =\n             Crafty.e('Player')\n                   .at(playerInfo.playerPos[0], playerInfo.playerPos[1])\n                   .setUp(playerInfo.playerId, playerInfo.playerColor)\n                   .setUpSocket(socket)\n                   .setUpSetBallTime()\n                   .bindingKeyEvents();\n\n        if (player.playerColor === 'red') {\n          player.addComponent('spr_red')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (player.playerColor === 'green') {\n          player.addComponent('spr_green')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (player.playerColor === 'blue') {\n          player.addComponent('spr_blue')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (player.playerColor === 'yellow') {\n          player.addComponent('spr_yellow')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        }\n\n        $('#hp').append(`<span class='player-${ playerInfo.playerId }'>\n                                  Player ${playerInfo.playerId}: ${ player.HP }\n                                 </span>`);\n        $('#scoreboard').append(`<span class='player-${ playerInfo.playerId }'>\n              Player ${playerInfo.playerId}: ${ player.longestBallHoldingTime }\n                                 </span>`);\n\n        this.players[playerInfo.playerId] = player;\n      } else {\n        let otherPlayer =\n          Crafty.e('OtherPlayer')\n                .at(playerInfo.playerPos[0], playerInfo.playerPos[1])\n                .setUp(data.players.playerId, playerInfo.playerColor);\n\n        if (otherPlayer.playerColor === 'red') {\n          otherPlayer.addComponent('spr_red')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (otherPlayer.playerColor === 'green') {\n          otherPlayer.addComponent('spr_green')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (otherPlayer.playerColor === 'blue') {\n          otherPlayer.addComponent('spr_blue')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        } else if (otherPlayer.playerColor === 'yellow') {\n          otherPlayer.addComponent('spr_yellow')\n                .attr({ w: mapGrid.PLAYER_WIDTH, h: mapGrid.PLAYER_HEIGHT });\n        }\n\n        $('#hp').append(`<span class='player-${ playerInfo.playerId }'>\n                            Player ${playerInfo.playerId}: ${ otherPlayer.HP }\n                           </span>`);\n        $('#scoreboard').append(`<span class='player-${ playerInfo.playerId }'>\n          Player ${playerInfo.playerId}: 0\n                                 </span>`);\n\n        this.players[playerInfo.playerId] = otherPlayer;\n      }\n    });\n\n    for (let i = 0; i < mapGrid.NUM_COLS; i++) {\n      for (let j = 0; j < mapGrid.NUM_ROWS; j++) {\n        this.board.grid[i][j].drawWalls(Crafty);\n      }\n    }\n  }\n\n  setUpPlayersMove() {\n    socket.on('updatePos', data => {\n      const player = this.players[data.playerId];\n      if (player) {\n        player.x = data.x;\n        player.y = data.y;\n      }\n    });\n  }\n\n  setUpPlacingWeapons() {\n    socket.on('addWeapon', data => {\n      const weapon = Crafty.e('Weapon')\n                           .at(data.x, data.y)\n                           .setUp(data.type);\n\n      if (data.type === 'BFS') {\n        weapon.addComponent('spr_bfs')\n              .attr({ w: mapGrid.BFS_WIDTH, h: mapGrid.BFS_HEIGHT });\n      } else if (data.type === 'DFS') {\n        weapon.addComponent('spr_dfs')\n              .attr({ w: mapGrid.DFS_WIDTH, h: mapGrid.DFS_HEIGHT });\n      }\n      const col = weapon.getCol();\n      const row = weapon.getRow();\n      this.weapons[[col, row]] = weapon;\n    });\n\n    socket.on('destroyWeapon', data => {\n      const weapon = this.weapons[[data.col, data.row]];\n      weapon.destroy();\n    });\n  }\n\n  setUpCreateDamage() {\n    socket.on('createDamage', data => {\n      Crafty.e('Damage')\n            .at(data.damageCell[0], data.damageCell[1])\n            .attr({ w: mapGrid.TILE_WIDTH, h: mapGrid.TILE_HEIGHT })\n            .setUpCreator(data.creatorId)\n            .disappearAfter(data.disappearTime)\n            .color(this.players[data.creatorId].playerColor, 0.5);\n    });\n  }\n\n  setUpHPChange() {\n    socket.on('HPChange', data => {\n      const player = this.players[data.playerId];\n      if (player) {\n        player.HP = data.playerHP;\n        $(`#hp .player-${ data.playerId }`)\n          .text(`Player ${data.playerId}: ${ data.playerHP }`);\n      }\n    });\n  }\n\n  setUpTimer() {\n    socket.on('countDown', data => {\n      $('#timer-countdown').text(data.timer);\n    });\n  }\n\n  setUpGameOver() {\n    socket.on('gameOver', data => {\n      Crafty.scene('GameOver', data);\n    });\n  }\n\n  setUpAddBall() {\n    socket.on('addBall', data => {\n      this.ball = Crafty.e('Ball')\n                    .at(data.col, data.row)\n                    .attr({ w: mapGrid.BALL_WIDTH, h: mapGrid.BALL_HEIGHT });\n    });\n  }\n\n  setUpShowBall() {\n    socket.on('showBall', data => {\n      this.ball.destroy();\n      this.players[data.playerId].pickUpBall();\n    });\n\n    socket.on('loseBall', data => {\n      this.players[data.playerId]\n                  .color('black');\n    });\n  }\n\n  setUpShowBallRecord() {\n    socket.on('showSelfScore', data => {\n      $('#self-record')\n        .html(`\n          <h2>Ball Duration</h2>\n          <span>\n            Longest Duration Time: ${ data.longestBallHoldingTime }\n          </span>\n          <span>\n            Current Duration Time: ${ data.currentBallHoldingTime }\n          </span>`);\n    });\n\n    socket.on('showScoreboard', data => {\n      $(`#scoreboard .player-${ data.playerId }`).text(\n        `Player ${data.playerId}: ${ data.score }`);\n    });\n  }\n\n  setUpHaveWeapon() {\n    socket.on('pickUpWeapon', data => {\n      this.players[this.selfId].weaponType = data.type;\n      $('#weapon-type').text(data.type);\n      if (data.type === 'BFS') {\n        $('#weapon-img').html(`<img src='../assets/bfs_weapon.png'\n                                      height='50'></img>`);\n      } else if (data.type === 'DFS') {\n        $('#weapon-img').html(`<img src='../assets/dfs_weapon.png'\n                                      height='50'></img>`);\n      }\n    });\n\n    socket.on('loseWeapon', data => {\n      this.players[data.playerId].loseWeapon();\n      $('#weapon-type').empty();\n      $('#weapon-img').empty();\n    });\n  }\n}\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/game.js\n **/","var createComponents = require('./entities.js');\nvar createPlayerComponent = require('./player.js');\nvar createWeaponComponent = require('./weapon.js');\nvar createBallComponent = require('./ball.js');\nconst Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\n\nmodule.exports = function(Crafty, model) {\n  const width = mapGrid.NUM_ROWS * mapGrid.TILE_WIDTH;\n  const height = mapGrid.NUM_COLS * mapGrid.TILE_HEIGHT;\n\n  Crafty.init(width, height, 'stage');\n\n  createComponents(Crafty, model);\n  createPlayerComponent(Crafty, model);\n  createWeaponComponent(Crafty);\n  createBallComponent(Crafty);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/canvas.js\n **/","const Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n/* globals Crafty */\n\nmodule.exports = function(Crafty, model) {\n  Crafty.c('Tile', {\n    init: function() {\n      this.attr({\n        w: mapGrid.PLAYER_WIDTH,\n        h: mapGrid.PLAYER_HEIGHT\n      });\n    },\n\n    at: function(col, row) {\n      const x = col * mapGrid.TILE_WIDTH + mapGrid.WALL_THICKNESS;\n      const y = row * mapGrid.TILE_HEIGHT + mapGrid.WALL_THICKNESS;\n      this.attr({ x: x, y: y });\n      return this;\n    },\n\n    getCol: function() {\n      return Math.floor(this.x / mapGrid.TILE_WIDTH);\n    },\n\n    getRow: function() {\n      return Math.floor(this.y / mapGrid.TILE_HEIGHT);\n    }\n  });\n\n\n  Crafty.c('Actor', {\n    init: function() {\n      this.requires('2D, Canvas, Tile');\n    },\n  });\n\n\n  Crafty.c('Wall', {\n    init: function() {\n      this.requires('2D, Canvas, Solid, Color, Collision');\n      this.z = 10;\n    },\n\n    wallDir: function(wallDir) {\n      let wall = this;\n      if (wallDir === wallDirection.HORIZONTAL) {\n        wall.attr({\n             w: mapGrid.TILE_WIDTH,\n             h: mapGrid.WALL_THICKNESS\n           });\n      } else if (wallDir === wallDirection.VERTICAL) {\n        wall.attr({\n             w: mapGrid.WALL_THICKNESS,\n             h: mapGrid.TILE_HEIGHT\n           });\n      }\n\n      if (model.receiver === 'CLIENT') {\n        wall.color('#FFFFFF');\n      }\n\n      return wall;\n    },\n\n    atWall: function(row, col, offset) {\n      const [offSetX, offsetY] = offset;\n      const x = (row * mapGrid.TILE_WIDTH) +\n                (offSetX * (mapGrid.TILE_WIDTH - mapGrid.WALL_THICKNESS));\n      const y = (col * mapGrid.TILE_HEIGHT) +\n                (offsetY * (mapGrid.TILE_HEIGHT - mapGrid.WALL_THICKNESS));\n      this.attr({ x: x, y: y });\n      return this;\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/entities.js\n **/","const mapGrid = {\n  NUM_ROWS: 13,\n  NUM_COLS: 13,\n  WALL_THICKNESS: 6,\n  TILE_WIDTH: 45,\n  TILE_HEIGHT: 45,\n  PLAYER_WIDTH: 30,\n  PLAYER_HEIGHT: 24,\n  BALL_WIDTH: 40,\n  BALL_HEIGHT: 40,\n  DFS_WIDTH: 50,\n  DFS_HEIGHT: 0.30 * 50,\n  BFS_WIDTH: 40,\n  BFS_HEIGHT: 0.70 * 40\n};\n\nconst wallDirection = {\n  HORIZONTAL: 'HORIZONTAL',\n  VERTICAL: 'VERTICAL'\n};\n\nconst weaponTypes = {\n  BFS: 'BFS',\n  DFS: 'DFS'\n};\n\nconst gameSettings = {\n  WEAPON_RANGE: 10,\n  BUFFER_DAMAGE_TIME: 1000,\n  BUFFER_SHOOTING_TIME: 1500,\n  WEAPON_SPAWN_TIME: 5000,\n  DAMAGE_ANIMATION_TIME: 100,\n  DAMAGE_DISAPPEAR_TIME: 1000,\n  HP_DAMAGE: 10,\n  GAME_DURATION: 30, // 200\n  COLORS: ['blue', 'red', 'yellow', 'green']\n};\n\nmodule.exports = {\n  mapGrid: mapGrid,\n  wallDirection: wallDirection,\n  weaponTypes: weaponTypes,\n  gameSettings: gameSettings\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/constants.js\n **/","/* globals Crafty */\nconst Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n\nmodule.exports = function(Crafty, model) {\n  Crafty.c('Player', {\n    init: function() {\n      this.requires('2D, DOM, Tile, Collision, Color');\n      this.charSpeed = 2;\n      this.HP = 100;\n      this.hasTakenDamage = false;\n      this.longestBallHoldingTime = 0;\n      this.currentBallHoldingTime = 0;\n      this.weaponType = null;\n      this.weaponCoolingdown = false;\n      this.z = 9;\n    },\n\n    bindingKeyEvents() {\n      this.charMove = { left: false, right: false, up: false, down: false };\n\n      this.bind('EnterFrame', function() {\n        if (this.charMove.right || this.charMove.left ||\n            this.charMove.up || this.charMove.down) {\n          this.socket.emit('updatePos', {\n            playerId: this.playerId,\n            charMove: this.charMove\n          });\n        }\n      });\n\n      this.bind('KeyDown', function(e) {\n        this.charMove.left = false;\n        this.charMove.right = false;\n        this.charMove.down = false;\n        this.charMove.up = false;\n\n        if (e.keyCode === Crafty.keys.RIGHT_ARROW) this.charMove.right = true;\n        if (e.keyCode === Crafty.keys.LEFT_ARROW) this.charMove.left = true;\n        if (e.keyCode === Crafty.keys.UP_ARROW) this.charMove.up = true;\n        if (e.keyCode === Crafty.keys.DOWN_ARROW) this.charMove.down = true;\n\n        if (e.keyCode === Crafty.keys.Z) {\n          this.pickUpWeapon();\n        }\n\n        if (e.keyCode === Crafty.keys.X && this.weaponType !== null) {\n          this.shootWeapon();\n        }\n      });\n\n      this.bind('KeyUp', function(e) {\n        if (e.keyCode === Crafty.keys.RIGHT_ARROW) this.charMove.right = false;\n        if (e.keyCode === Crafty.keys.LEFT_ARROW) this.charMove.left = false;\n        if (e.keyCode === Crafty.keys.UP_ARROW) this.charMove.up = false;\n        if (e.keyCode === Crafty.keys.DOWN_ARROW) this.charMove.down = false;\n      });\n\n      return this;\n    },\n\n    setUp: function(playerId, playerColor) {\n      this.playerId = playerId;\n      if (playerColor) {\n        this.playerColor = playerColor;\n      }\n      return this;\n    },\n\n    setUpSocket: function(socket) {\n      this.socket = socket;\n      return this;\n    },\n\n    setUpSetBallTime: function() {\n      this.socket.on('setBallTime', data => {\n        this.currentBallHoldingTime = data.currentBallHoldingTime;\n        this.longestSecsHoldingBall = data.longestSecsHoldingBall;\n      });\n\n      return this;\n    },\n\n    pickUpWeapon: function() {\n      this.socket.emit('pickUpWeapon', {\n        playerId: this.playerId\n      });\n    },\n\n    pickUpBall: function() {\n      this.color('white');\n      return this;\n    },\n\n    shootWeapon: function() {\n      this.socket.emit('shootWeapon', {\n        playerId: this.playerId\n      });\n    },\n\n    loseWeapon: function() {\n      this.weaponType = null;\n    }\n  });\n\n  Crafty.c('OtherPlayer', {\n    init: function() {\n      this.requires('2D, DOM, Tile, Color');\n      this.HP = 100;\n    },\n\n    setUp: function(playerId, playerColor, weaponDisplayId) {\n      this.playerId = playerId;\n\n      if (playerColor) {\n        this.playerColor = playerColor;\n      }\n\n      if (weaponDisplayId) {\n        this.weaponDisplayId = weaponDisplayId;\n      }\n\n      return this;\n    },\n\n    pickUpBall: function() {\n      this.color('white');\n      return this;\n    },\n\n    loseWeapon: function() {\n\n    }\n\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/player.js\n **/","/* globals Crafty */\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Weapon', {\n    init: function() {\n      this.requires('Actor, Color, Collision');\n    },\n\n    setUp: function(type) {\n      this.type = type;\n      return this;\n    }\n  });\n\n  Crafty.c('Damage', {\n    init: function() {\n      this.requires('Actor, Color, Collision');\n    },\n\n    setUpCreator(playerId) {\n      this.creatorId = playerId;\n      return this;\n    },\n\n    disappearAfter(disappearTime) {\n      setTimeout(() => this.destroy(), disappearTime);\n      return this;\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/weapon.js\n **/","/* globals Crafty */\n\nmodule.exports = function(Crafty) {\n  Crafty.c('Ball', {\n    init: function() {\n      this.requires('Actor, spr_ball, Collision');\n      //TODO: change spr_ball\n      this.z = 8;\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/ball.js\n **/","let ClientModel = {\n  receiver: 'CLIENT',\n  wallInit: function() {\n    this.requires('2D, Canvas, Solid, Color, Collision');\n  },\n  playerMoveInDirections: function(speed) {\n\n  }\n };\n\nmodule.exports = ClientModel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/model/client_model.js\n **/","const Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\nconst Tile = require('./tile.js');\n\n\nconst DIRECTION = {\n  left: 'left',\n  right: 'right',\n  top: 'top',\n  bottom: 'bottom'\n};\n\nconst OPPOSITE = {\n  left: DIRECTION.right,\n  right: DIRECTION.left,\n  top: DIRECTION.bottom,\n  bottom: DIRECTION.top\n};\n\n\nclass Board {\n  constructor(n, m, seedRandomStr) {\n    this.numCols = n;\n    this.numRows = m;\n    Math.seedrandom(seedRandomStr);\n    this.grid = this.createGrid();\n    this.frontier = [];\n    this.createMaze();\n  }\n\n  createGrid() {\n    let grid = new Array(this.numRows);\n    for (let i = 0; i < grid.length; i++) {\n      grid[i] = new Array(this.numCols);\n      for (let j = 0; j < this.numCols; j++) {\n        grid[i][j] = new Tile(i, j);\n      }\n    }\n    return grid;\n  }\n\n  addFrontiers(x, y) {\n    let dirs = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n    dirs.forEach(dir => {\n      const [newX, newY] = [x + dir[0], y + dir[1]];\n\n      if (this.isInGrid(newX, newY) && !this.grid[newX][newY].isInMaze &&\n          this.grid[newX][newY].hasBeenFrontier === false) {\n        this.frontier.push([newX, newY]);\n        this.grid[newX][newY].hasBeenFrontier = true;\n      }\n    });\n  }\n\n  isInGrid(x, y) {\n    return 0 <= x && x < this.numCols && 0 <= y && y < this.numRows;\n  }\n\n  inMazeNeighbors(x, y) {\n    let neighbors = [];\n    if (x > 0 && this.grid[x - 1][y].isInMaze) {\n      neighbors.push([x - 1, y]);\n    }\n    if (x < (this.numCols - 1) && this.grid[x + 1][y].isInMaze) {\n      neighbors.push([x + 1, y]);\n    }\n    if (y > 0 && this.grid[x][y - 1].isInMaze) {\n      neighbors.push([x, y - 1]);\n    }\n    if (y < (this.numRows - 1) && this.grid[x][y + 1].isInMaze) {\n      neighbors.push([x, y + 1]);\n    }\n\n    return neighbors;\n  }\n\n  direction(x, y, otherX, otherY) {\n    if ((otherX < x) && y === otherY) {\n      return DIRECTION.left;\n    } else if ((otherY < y) && x === otherX) {\n      return DIRECTION.top;\n    } else if ((otherX > x) && y === otherY) {\n      return DIRECTION.right;\n    } else if ((otherY > y) && x === otherX) {\n      return DIRECTION.bottom;\n    }\n  }\n\n  expandMaze(x, y) {\n    this.grid[x][y].isInMaze = true;\n    this.addFrontiers(x, y);\n  }\n\n  createMaze() {\n    const randomX = Math.floor(Math.random() * this.numCols);\n    const randomY = Math.floor(Math.random() * this.numRows);\n    this.expandMaze(randomX, randomY);\n    while (this.frontier.length !== 0) {\n      const randomIndex = Math.floor(Math.random() * this.frontier.length);\n      const [randomPos] = this.frontier.splice(randomIndex, 1);\n      const [x, y] = randomPos;\n      const neighbors = this.inMazeNeighbors(x, y);\n      const [neighX, neighY] =\n        neighbors[Math.floor(Math.random() * neighbors.length)];\n\n      const dir = this.direction(x, y, neighX, neighY);\n      this.grid[x][y].walls[dir] = false;\n      this.grid[neighX][neighY].walls[OPPOSITE[dir]] = false;\n\n      this.expandMaze(x, y);\n    }\n  }\n}\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/board.js\n **/","const Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n/* globals Crafty */\n\nclass Tile {\n  constructor(x, y) {\n    this.walls = {\n      left: true,\n      right: true,\n      top: true,\n      bottom: true,\n    };\n    this.isInMaze = false;\n    this.hasBeenFrontier = false;\n    this.x = x;\n    this.y = y;\n  }\n\n  drawWalls(Crafty) {\n    if (this.walls.left) {\n      Crafty.e('Wall').wallDir(wallDirection.VERTICAL)\n                      .atWall(this.x, this.y, [0, 0]);\n    }\n    if (this.walls.right) {\n      Crafty.e('Wall').wallDir(wallDirection.VERTICAL)\n                      .atWall(this.x, this.y, [1, 0]);\n    }\n    if (this.walls.top) {\n      Crafty.e('Wall').wallDir(wallDirection.HORIZONTAL)\n                      .atWall(this.x, this.y, [0, 0]);\n    }\n    if (this.walls.bottom) {\n      Crafty.e('Wall').wallDir(wallDirection.HORIZONTAL)\n                      .atWall(this.x, this.y, [0, 1]);\n    }\n  }\n\n  remainingPaths() {\n    return Object.keys(this.walls).filter((dir) => {\n      return !this.walls[dir];\n    });\n  }\n}\n\nmodule.exports = Tile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/tile.js\n **/"],"sourceRoot":""}