{"version":3,"sources":["webpack:///webpack/bootstrap 80b255fcb813362cce25","webpack:///./public/src/index.js","webpack:///./public/src/game.js","webpack:///./public/src/constants.js","webpack:///./public/src/components/canvas.js","webpack:///./public/src/components/entities.js","webpack:///./public/src/components/player.js","webpack:///./public/src/model/client_model.js","webpack:///./public/src/board.js","webpack:///./public/src/tile.js"],"names":["document","addEventListener","game","start","Constants","require","mapGrid","wallDirection","socket","io","Game","NUM_ROWS","TILE_WIDTH","NUM_COLS","TILE_HEIGHT","Crafty","on","player","e","color","at","setUp","data","playerId","playerColor","setUpSocket","board","seedRandomStr","i","j","grid","drawWalls","WALL_THICKNESS","PLAYER_WIDTH","PLAYER_HEIGHT","HORIZONTAL","VERTICAL","module","exports","createComponents","createPlayerComponent","model","init","receiver","background","c","attr","w","h","row","col","x","y","requires","wallInit","bind","wallDir","wall","atWall","offset","offSetX","offsetY","moveInDirections","speed","charMove","left","right","up","down","charSpeed","playerMoveInDirections","stopOnSolids","onHit","stopMovement","ClientModel","emit","keyCode","keys","RIGHT_ARROW","LEFT_ARROW","UP_ARROW","DOWN_ARROW","Tile","DIRECTION","top","bottom","OPPOSITE","Board","n","m","numCols","numRows","Math","seedrandom","createGrid","frontier","createMaze","Array","length","dirs","forEach","newX","dir","newY","isInGrid","isInMaze","hasBeenFrontier","push","neighbors","otherX","otherY","addFrontiers","randomX","floor","random","randomY","expandMaze","randomIndex","splice","randomPos","inMazeNeighbors","neighX","neighY","direction","walls"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 80b255fcb813362cce25\n **/","import Game from './game.js';\n/* globals io */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const game = new Game();\n  game.start();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/index.js\n **/","import createCanvas from './components/canvas.js';\nimport createComponents from './components/entities.js';\nimport createPlayerComponent from './components/player.js';\nimport ClientModel from './model/client_model.js';\nimport Board from './board.js';\nconst Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n\nconst socket = io();\n/* globals Crafty */\n/* globals io */\n\nclass Game {\n  constructor() {\n  }\n\n  width() {\n    return mapGrid.NUM_ROWS * mapGrid.TILE_WIDTH;\n  }\n\n  height() {\n    return mapGrid.NUM_COLS * mapGrid.TILE_HEIGHT;\n  }\n\n  start() {\n    createCanvas(Crafty, ClientModel);\n    socket.on('connected', data => {\n        let player = Crafty.e('Player')\n                           .color('blue')\n                           .at(0, 0)\n                           .setUp(data.playerId, data.playerColor)\n                           .setUpSocket(socket, data.playerId);\n      this.board =\n        new Board(mapGrid.NUM_COLS, mapGrid.NUM_ROWS, data.seedRandomStr);\n\n      for (let i = 0; i < mapGrid.NUM_COLS; i++) {\n        for (let j = 0; j < mapGrid.NUM_ROWS; j++) {\n          this.board.grid[i][j].drawWalls(Crafty);\n        }\n      }\n    });\n  }\n}\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/game.js\n **/","const mapGrid = {\n  NUM_ROWS: 8,\n  NUM_COLS: 8,\n  WALL_THICKNESS: 3,\n  TILE_WIDTH: 50,\n  TILE_HEIGHT: 50,\n  PLAYER_WIDTH: 30,\n  PLAYER_HEIGHT: 30\n};\n\nconst wallDirection = {\n  HORIZONTAL: 'HORIZONTAL',\n  VERTICAL: 'VERTICAL'\n};\n\nmodule.exports = { mapGrid: mapGrid, wallDirection: wallDirection };\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/constants.js\n **/","var createComponents = require('./entities.js');\nvar createPlayerComponent = require('./player.js');\n\nmodule.exports = function(Crafty, model) {\n  Crafty.init(500, 500);\n\n  if (model.receiver === 'CLIENT') {\n    Crafty.background('#000000');\n  }\n\n  createComponents(Crafty, model);\n  createPlayerComponent(Crafty, model);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/canvas.js\n **/","const Constants = require('../constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n/* globals Crafty */\n\nmodule.exports = function(Crafty, model) {\n  Crafty.c('Tile', {\n    init: function() {\n      this.attr({\n        w: mapGrid.PLAYER_WIDTH,\n        h: mapGrid.PLAYER_HEIGHT\n      });\n    },\n\n    at: function(row, col) {\n      const x = row * mapGrid.TILE_WIDTH + mapGrid.WALL_THICKNESS;\n      const y = col * mapGrid.TILE_HEIGHT + mapGrid.WALL_THICKNESS;\n      this.attr({ x: x, y: y });\n      return this;\n    }\n  });\n\n\n  Crafty.c('Actor', {\n    init: function() {\n      this.requires('2D, Canvas, Tile');\n    },\n  });\n\n\n  Crafty.c('Wall', {\n    init: function() {\n      model.wallInit.bind(this)();\n    },\n\n    wallDir: function(wallDir) {\n      let wall = this;\n      if (wallDir === wallDirection.HORIZONTAL) {\n        wall.attr({\n             w: mapGrid.TILE_WIDTH,\n             h: mapGrid.WALL_THICKNESS\n           });\n      } else if (wallDir === wallDirection.VERTICAL) {\n        wall.attr({\n             w: mapGrid.WALL_THICKNESS,\n             h: mapGrid.TILE_HEIGHT\n           });\n      }\n\n      if (model.receiver === 'CLIENT') {\n        wall.color('#FFFFFF');\n      }\n\n      return wall;\n    },\n\n    atWall: function(row, col, offset) {\n      const [offSetX, offsetY] = offset;\n      const x = (row * mapGrid.TILE_WIDTH) +\n                (offSetX * (mapGrid.TILE_WIDTH - mapGrid.WALL_THICKNESS));\n      const y = (col * mapGrid.TILE_HEIGHT) +\n                (offsetY * (mapGrid.TILE_HEIGHT - mapGrid.WALL_THICKNESS));\n      this.attr({ x: x, y: y });\n      return this;\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/entities.js\n **/","/* globals Crafty */\n\nmodule.exports = function(Crafty, model) {\n  Crafty.c('Player', {\n    init: function() {\n      this.requires('Actor, Color, Collision')\n          .moveInDirections(2);\n    },\n\n    // playerColor: function(color) {\n    //   this.color(color);\n    //   return this;\n    // },\n\n    moveInDirections(speed) {\n      this.charMove = { left: false, right: false, up: false, down: false };\n      this.charSpeed = speed;\n\n      model.playerMoveInDirections.bind(this, speed)();\n      return this;\n    },\n\n    stopOnSolids: function() {\n      this.onHit('Solid', this.stopMovement);\n      return this;\n    },\n\n    stopMovement: function() {\n      if (this.charMove.left) {\n        this.x += this.charSpeed;\n      } else if (this.charMove.right) {\n        this.x -= this.charSpeed;\n      } else if (this.charMove.up) {\n        this.y += this.charSpeed;\n      } else if (this.charMove.down) {\n        this.y -= this.charSpeed;\n      }\n      this.charMove.left = false;\n      this.charMove.right = false;\n      this.charMove.down = false;\n      this.charMove.up = false;\n    },\n\n    setUp: function(playerId, playerColor) {\n      this.playerId = playerId;\n      if (playerColor) {\n        this.color(playerColor);\n      }\n\n      return this;\n    },\n\n    setUpSocket: function(socket) {\n      this.socket = socket;\n      this.socket.on('updatePos', data => {\n        this.x = data.x;\n        this.y = data.y;\n      });\n\n      return this;\n    }\n  });\n\n  Crafty.c('otherPlayer', {\n    init: function() {\n      this.requires('Actor, Color');\n    },\n\n    setUp: function(playerId, playerColor) {\n      this.playerId = playerId;\n\n      if (playerColor) {\n        this.color(playerColor);\n      }\n\n      return this;\n    },\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/components/player.js\n **/","let ClientModel = {\n  receiver: 'CLIENT',\n  wallInit: function() {\n    this.requires('2D, Canvas, Solid, Color, Collision');\n  },\n  playerMoveInDirections: function(speed) {\n    this.bind('EnterFrame', function() {\n      if (this.charMove.right || this.charMove.left ||\n          this.charMove.up || this.charMove.down) {\n        this.socket.emit('updatePos', { playerId: this.playerId, charMove: this.charMove });\n      }\n    });\n\n    this.bind('KeyDown', function(e) {\n      this.charMove.left = false;\n      this.charMove.right = false;\n      this.charMove.down = false;\n      this.charMove.up = false;\n\n      if (e.keyCode === Crafty.keys.RIGHT_ARROW) this.charMove.right = true;\n      if (e.keyCode === Crafty.keys.LEFT_ARROW) this.charMove.left = true;\n      if (e.keyCode === Crafty.keys.UP_ARROW) this.charMove.up = true;\n      if (e.keyCode === Crafty.keys.DOWN_ARROW) this.charMove.down = true;\n    });\n\n    this.bind('KeyUp', function(e) {\n      if (e.keyCode === Crafty.keys.RIGHT_ARROW) this.charMove.right = false;\n      if (e.keyCode === Crafty.keys.LEFT_ARROW) this.charMove.left = false;\n      if (e.keyCode === Crafty.keys.UP_ARROW) this.charMove.up = false;\n      if (e.keyCode === Crafty.keys.DOWN_ARROW) this.charMove.down = false;\n    });\n  }\n };\n\nmodule.exports = ClientModel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/model/client_model.js\n **/","const Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\nconst Tile = require('./tile.js');\n\n\nconst DIRECTION = {\n  left: 'left',\n  right: 'right',\n  top: 'top',\n  bottom: 'bottom'\n};\n\nconst OPPOSITE = {\n  left: DIRECTION.right,\n  right: DIRECTION.left,\n  top: DIRECTION.bottom,\n  bottom: DIRECTION.top\n};\n\n\nclass Board {\n  constructor(n, m, seedRandomStr) {\n    this.numCols = n;\n    this.numRows = m;\n    Math.seedrandom(seedRandomStr);\n    this.grid = this.createGrid();\n    this.frontier = [];\n    this.createMaze();\n  }\n\n  createGrid() {\n    let grid = new Array(this.numRows);\n    for (let i = 0; i < grid.length; i++) {\n      grid[i] = new Array(this.numCols);\n      for (let j = 0; j < this.numCols; j++) {\n        grid[i][j] = new Tile(i, j);\n      }\n    }\n    return grid;\n  }\n\n  addFrontiers(x, y) {\n    let dirs = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n    dirs.forEach(dir => {\n      const [newX, newY] = [x + dir[0], y + dir[1]];\n\n      if (this.isInGrid(newX, newY) && !this.grid[newX][newY].isInMaze &&\n          this.grid[newX][newY].hasBeenFrontier === false) {\n        this.frontier.push([newX, newY]);\n        this.grid[newX][newY].hasBeenFrontier = true;\n      }\n    });\n  }\n\n  isInGrid(x, y) {\n    return 0 <= x && x < this.numCols && 0 <= y && y < this.numRows;\n  }\n\n  inMazeNeighbors(x, y) {\n    let neighbors = [];\n    if (x > 0 && this.grid[x - 1][y].isInMaze) {\n      neighbors.push([x - 1, y]);\n    }\n    if (x < (this.numCols - 1) && this.grid[x + 1][y].isInMaze) {\n      neighbors.push([x + 1, y]);\n    }\n    if (y > 0 && this.grid[x][y - 1].isInMaze) {\n      neighbors.push([x, y - 1]);\n    }\n    if (y < (this.numRows - 1) && this.grid[x][y + 1].isInMaze) {\n      neighbors.push([x, y + 1]);\n    }\n\n    return neighbors;\n  }\n\n  direction(x, y, otherX, otherY) {\n    if ((otherX < x) && y === otherY) {\n      return DIRECTION.left;\n    } else if ((otherY < y) && x === otherX) {\n      return DIRECTION.top;\n    } else if ((otherX > x) && y === otherY) {\n      return DIRECTION.right;\n    } else if ((otherY > y) && x === otherX) {\n      return DIRECTION.bottom;\n    }\n  }\n\n  expandMaze(x, y) {\n    this.grid[x][y].isInMaze = true;\n    this.addFrontiers(x, y);\n  }\n\n  createMaze() {\n    const randomX = Math.floor(Math.random() * this.numCols);\n    const randomY = Math.floor(Math.random() * this.numRows);\n    this.expandMaze(randomX, randomY);\n    while (this.frontier.length !== 0) {\n      const randomIndex = Math.floor(Math.random() * this.frontier.length);\n      const [randomPos] = this.frontier.splice(randomIndex, 1);\n      const [x, y] = randomPos;\n      const neighbors = this.inMazeNeighbors(x, y);\n      const [neighX, neighY] =\n        neighbors[Math.floor(Math.random() * neighbors.length)];\n\n      const dir = this.direction(x, y, neighX, neighY);\n      this.grid[x][y].walls[dir] = false;\n      this.grid[neighX][neighY].walls[OPPOSITE[dir]] = false;\n\n      this.expandMaze(x, y);\n    }\n  }\n}\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/board.js\n **/","const Constants = require('./constants.js');\nconst mapGrid = Constants.mapGrid;\nconst wallDirection = Constants.wallDirection;\n/* globals Crafty */\n\nclass Tile {\n  constructor(x, y) {\n    this.walls = {\n      left: true,\n      right: true,\n      top: true,\n      bottom: true,\n    };\n    this.isInMaze = false;\n    this.hasBeenFrontier = false;\n    this.x = x;\n    this.y = y;\n  }\n\n  drawWalls(Crafty) {\n    if (this.walls.left) {\n      Crafty.e('Wall').wallDir(wallDirection.VERTICAL)\n                      .atWall(this.x, this.y, [0, 0]);\n    }\n    if (this.walls.right) {\n      Crafty.e('Wall').wallDir(wallDirection.VERTICAL)\n                      .atWall(this.x, this.y, [1, 0]);\n    }\n    if (this.walls.top) {\n      Crafty.e('Wall').wallDir(wallDirection.HORIZONTAL)\n                      .atWall(this.x, this.y, [0, 0]);\n    }\n    if (this.walls.bottom) {\n      Crafty.e('Wall').wallDir(wallDirection.HORIZONTAL)\n                      .atWall(this.x, this.y, [0, 1]);\n    }\n  }\n}\n\nmodule.exports = Tile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/src/tile.js\n **/"],"sourceRoot":""}